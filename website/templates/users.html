{% extends "base.html" %} 
{% block title %}Admin{% endblock %}
{%block content %}
<div> 
    <br>
    <h2 align="center"> Admin Panel</h2>
    <br>
<table class="table table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Email</th>
            <th scope="col">Username</th>
            <th scope="col">Role</th>
            <th scope="col">Created At</th>
            <th scope="col">Updated At</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.role.role_name if user.role else 'No Role Assigned' }}</td>
            <td>{{ user.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            <td>{{ user.updated_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            <td>
                <div class="btn-group">
                    <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-bs-toggle="dropdown">
                    </button>
                    <ul class="dropdown-menu">
                        <li ><a class="dropdown-item" href="/users/update-role/{{user.id}}">
                            Change Role</a>
                        </li>
                        <li >
                            <a class="dropdown-item" href="/users/delete-user/{{user.id}}">
                            Delete User</a> 
                        </li>
                    </ul>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}